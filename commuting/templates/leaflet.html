<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>Transit Near Me - Mobility Lab</title>
<link rel="stylesheet" href="{{ STATIC_URL }}leaflet.css" />
<style type="text/css">
html, body, #map { height: 100%; padding: 0; margin: 0; }
</style>
<!--[if lte IE 8]><link rel="stylesheet" href="{{ STATIC_URL }}leaflet.ie.css" /><![endif]-->
</head>
<body>
<div id="map"></div>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<script src="{{ STATIC_URL }}leaflet.js"></script>
<script src="{{ STATIC_URL }}transit.js"></script>
<script type="text/javascript">
$(function() {
	var map = Transit.addMap(
		'Leaflet', 
		'map',
		{ 'lat': 38.89706, 'lng': -77.07092 });

	map.addCallback({
		types: ['click', 'center'],
		apiCall: Transit.API.getNearby,
		extraParams: { 'radius_m': 1000 },
		callback: function(data) {
			map.overlay(data, 'nearby');
		}
	});	

	Transit.tryGeolocating(
		function(latlng) { map.center(latlng); },
		function(error) { map.center(); });
});
</script>
</body>
</html>
